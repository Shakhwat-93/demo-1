<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Confirmed | FreshHarvest</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
</head>

<body class="bg-[#0a0a0a] text-white min-h-screen flex items-center justify-center relative overflow-hidden">
    <div class="glow-bg">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
    </div>

    <div class="glass-card p-10 rounded-3xl w-full max-w-lg text-center relative z-10 mx-4 animate-fade-in-up">
        <div
            class="w-24 h-24 bg-[#00dc82]/20 rounded-full flex items-center justify-center text-[#00dc82] text-5xl mx-auto mb-6 shadow-[0_0_30px_rgba(0,220,130,0.3)]">
            <i class="fa-solid fa-check"></i>
        </div>

        <h1 class="text-3xl font-bold mb-2">Order Confirmed!</h1>
        <p class="text-gray-400 mb-8">Thank you for shopping with FreshHarvest.</p>

        <div class="bg-white/5 rounded-2xl p-6 mb-8 text-left border border-white/5">
            <div class="flex justify-between mb-2">
                <span class="text-gray-400 text-sm">Order ID</span>
                <span class="font-mono font-bold" id="order-id">Loading...</span>
            </div>
            <div class="flex justify-between mb-4">
                <span class="text-gray-400 text-sm">Date</span>
                <span class="text-sm" id="order-date">...</span>
            </div>
            <div class="border-t border-white/10 my-4"></div>
            <div class="flex justify-between items-center">
                <span class="font-bold">Total Amount</span>
                <span class="text-2xl font-bold text-[#00dc82]" id="order-total">...</span>
            </div>
        </div>

        <div class="grid gap-4">
            <a href="track.html" class="btn-primary py-3 rounded-xl font-bold shadow-lg shadow-emerald-500/20 block">
                Track Order
            </a>
            <a href="index.html" class="glass bg-white/5 py-3 rounded-xl font-bold hover:bg-white/10 transition block">
                Continue Shopping
            </a>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const urlParams = new URLSearchParams(window.location.search);
            const orderId = urlParams.get('id');

            if (!orderId) {
                window.location.href = 'index.html';
                return;
            }

            document.getElementById('order-id').innerText = '#' + orderId;
            document.getElementById('order-date').innerText = new Date().toLocaleDateString();

            // Fetch detail from Supabase if needed, or pass via URL. 
            // For now, let's fetch for accuracy.
            if (typeof supabase !== 'undefined') {
                const client = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
                const { data, error } = await client.from('orders').select('total_amount').eq('id', orderId).single();

                if (data) {
                    document.getElementById('order-total').innerText = '$' + data.total_amount;
                }
            }
        });
    </script>
</body>

</html>